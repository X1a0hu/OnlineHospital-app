{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Footer from \"@/components/Footer.vue\";\nexport default {\n  data() {\n    return {\n      //接受服务器端返回数据对象：\n      checkAvailability: {\n        hpID: this.$route.query.hpID,\n        //值从上一个组件界面获得\n        smID: this.$route.query.smID,\n        //值从上一个组件界面获得\n        year: null,\n        month: null,\n        days: [],\n        selectDay: \"\" //日历中选中的日期\n      }\n    };\n  },\n  created() {\n    this.initDate();\n    this.loadOrdersData();\n  },\n  methods: {\n    submit(checkAvailability) {\n      this.$router.push({\n        path: \"/confirmOrder\"\n        // query: {\n        //   selectDay: checkAvailability.selectDay,\n        //   hpID: checkAvailability.hpID,\n        //   smID: checkAvailability.smID,\n        // },\n      }).catch(e => {});\n    },\n    selectDay(index) {\n      if (this.checkAvailability.days[index].reserve == false) {\n        return;\n      }\n      for (let i = 0; i < this.checkAvailability.days.length; i++) {\n        this.checkAvailability.days[i].selectDay = 0; //清除日历中每天选中状态 全部清零\n      }\n      this.checkAvailability.days[index].selectDay = 1;\n      this.checkAvailability.selectDay = this.checkAvailability.days[index].date;\n      this.checkAvailability.days.sort();\n    },\n    toBack() {\n      this.$router.back();\n    },\n    initDate() {\n      let getTime = new Date().getTime(); //当前时间戳\n      let d = new Date(getTime);\n      this.checkAvailability.year = d.getFullYear();\n      this.checkAvailability.month = d.getMonth() + 1;\n    },\n    //得到当前日期参数值：\n    getCalendarDate() {\n      let year = this.checkAvailability.year;\n      let month = this.checkAvailability.month + \"\";\n      month = month.padStart(2, \"0\");\n      let day = \"01\";\n      //2024-07-02\n      return `${year}-${month}-${day}`; //模版字符串 ES6\n    },\n    //加载日历和预约订单量\n    loadOrdersData() {\n      let url = \"/orders/checkAvailability\";\n      this.$axios({\n        method: \"get\",\n        url: url,\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\"))\n        },\n        params: {\n          smID: this.checkAvailability.smID,\n          hpID: this.checkAvailability.hpID,\n          startDate: this.getCalendarDate()\n        }\n      }).then(response => {\n        this.checkAvailability.days = response.data.data.availableDays;\n        for (let i = 0; i < this.checkAvailability.days.length; i++) {\n          if (this.checkAvailability.days[i].date != null) {\n            this.checkAvailability.days[i].day = this.checkAvailability.days[i].date.substring(8);\n          }\n        }\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    //前一个月\n    preMonth() {\n      if (this.checkAvailability.month > 1) {\n        this.checkAvailability.month--;\n      } else {\n        this.checkAvailability.year--;\n        this.checkAvailability.month = 12;\n      }\n      this.loadOrdersData();\n    },\n    //后一个月\n    nextMonth() {\n      if (this.checkAvailability.month < 12) {\n        this.checkAvailability.month++;\n      } else {\n        this.checkAvailability.year++;\n        this.checkAvailability.month = 1;\n      }\n      this.loadOrdersData();\n    }\n  },\n  components: {\n    //注册子组件 使用名字:导入名字\n    Footer\n  }\n};","map":{"version":3,"names":["Footer","data","checkAvailability","hpID","$route","query","smID","year","month","days","selectDay","created","initDate","loadOrdersData","methods","submit","$router","push","path","catch","e","index","reserve","i","length","date","sort","toBack","back","getTime","Date","d","getFullYear","getMonth","getCalendarDate","padStart","day","url","$axios","method","headers","Authorization","JSON","parse","sessionStorage","getItem","params","startDate","then","response","availableDays","substring","console","log","preMonth","nextMonth","components"],"sources":["src/views/SelectDate.vue"],"sourcesContent":["<template>\r\n  <!-- 总容器 -->\r\n  <div class=\"wrapper\">\r\n    <header>\r\n      <i class=\"fa fa-angle-left\" @click=\"toBack()\"></i>\r\n      <p>选择体检日期</p>\r\n      <div></div>\r\n    </header>\r\n    <div class=\"top-ban\"></div>\r\n\r\n    <section>\r\n      <div class=\"date-box\">\r\n        <i class=\"fa fa-angle-left\" @click=\"preMonth()\"></i>\r\n        <p>\r\n          {{ checkAvailability.year + \"年\" + checkAvailability.month + \"月\" }}\r\n        </p>\r\n        <i class=\"fa fa-angle-right\" @click=\"nextMonth()\"></i>\r\n      </div>\r\n      <table>\r\n        <tr>\r\n          <th>日</th>\r\n          <th>一</th>\r\n          <th>二</th>\r\n          <th>三</th>\r\n          <th>四</th>\r\n          <th>五</th>\r\n          <th>六</th>\r\n        </tr>\r\n      </table>\r\n      <ul>\r\n        <li v-for=\"(c, index) in checkAvailability.days\" :key=\"index\">\r\n          <p\r\n            :class=\"{\r\n              fontColor: c.reserve == true && c.remainSlots != 0,\r\n              pselect: c.selectDay == 1,\r\n            }\"\r\n            @click=\"selectDay(index)\"\r\n          >\r\n            {{ c.date != null ? new Date(c.date).getDate() : \"\" }}\r\n          </p>\r\n          <p class=\"count\">\r\n            {{\r\n              index % 7 == 0 && c.date != null\r\n                ? \"\"\r\n                : c.reserve == true && c.remainSlots != 0\r\n                ? \"余\" + c.remainSlots\r\n                : \"0\"\r\n            }}\r\n          </p>\r\n          <p class=\"none\">\r\n            {{ index % 7 == 0 && c.date != null ? \"休息\" : \"\" }}\r\n          </p>\r\n        </li>\r\n      </ul>\r\n    </section>\r\n    <div\r\n      class=\"bottom-btn\"\r\n      @click=\"submit(this.checkAvailability.hpID, this.checkAvailability.smID,this.checkAvailability.year,this.)\"\r\n    >\r\n      <!-- -->\r\n      <div></div>\r\n      <div>下一步</div>\r\n    </div>\r\n\r\n    <div class=\"bottom-ban\"></div>\r\n    <Footer></Footer>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Footer from \"@/components/Footer.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      //接受服务器端返回数据对象：\r\n      checkAvailability: {\r\n        hpID: this.$route.query.hpID, //值从上一个组件界面获得\r\n        smID: this.$route.query.smID, //值从上一个组件界面获得\r\n        year: null,\r\n        month: null,\r\n        days: [],\r\n        selectDay: \"\", //日历中选中的日期\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.initDate();\r\n    this.loadOrdersData();\r\n  },\r\n  methods: {\r\n    submit(checkAvailability) {\r\n      this.$router\r\n        .push({\r\n          path: \"/confirmOrder\",\r\n          // query: {\r\n          //   selectDay: checkAvailability.selectDay,\r\n          //   hpID: checkAvailability.hpID,\r\n          //   smID: checkAvailability.smID,\r\n          // },\r\n        })\r\n        .catch((e) => {});\r\n    },\r\n    selectDay(index) {\r\n      if (this.checkAvailability.days[index].reserve == false) {\r\n        return;\r\n      }\r\n      for (let i = 0; i < this.checkAvailability.days.length; i++) {\r\n        this.checkAvailability.days[i].selectDay = 0; //清除日历中每天选中状态 全部清零\r\n      }\r\n      this.checkAvailability.days[index].selectDay = 1;\r\n      this.checkAvailability.selectDay =\r\n        this.checkAvailability.days[index].date;\r\n      this.checkAvailability.days.sort();\r\n    },\r\n    toBack() {\r\n      this.$router.back();\r\n    },\r\n    initDate() {\r\n      let getTime = new Date().getTime(); //当前时间戳\r\n      let d = new Date(getTime);\r\n      this.checkAvailability.year = d.getFullYear();\r\n      this.checkAvailability.month = d.getMonth() + 1;\r\n    },\r\n    //得到当前日期参数值：\r\n    getCalendarDate() {\r\n      let year = this.checkAvailability.year;\r\n      let month = this.checkAvailability.month + \"\";\r\n      month = month.padStart(2, \"0\");\r\n      let day = \"01\";\r\n      //2024-07-02\r\n      return `${year}-${month}-${day}`; //模版字符串 ES6\r\n    },\r\n    //加载日历和预约订单量\r\n    loadOrdersData() {\r\n      let url = \"/orders/checkAvailability\";\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: url,\r\n        headers: {\r\n          Authorization:\r\n            \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\")),\r\n        },\r\n        params: {\r\n          smID: this.checkAvailability.smID,\r\n          hpID: this.checkAvailability.hpID,\r\n          startDate: this.getCalendarDate(),\r\n        },\r\n      })\r\n        .then((response) => {\r\n          this.checkAvailability.days = response.data.data.availableDays;\r\n          for (let i = 0; i < this.checkAvailability.days.length; i++) {\r\n            if (this.checkAvailability.days[i].date != null) {\r\n              this.checkAvailability.days[i].day =\r\n                this.checkAvailability.days[i].date.substring(8);\r\n            }\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    //前一个月\r\n    preMonth() {\r\n      if (this.checkAvailability.month > 1) {\r\n        this.checkAvailability.month--;\r\n      } else {\r\n        this.checkAvailability.year--;\r\n        this.checkAvailability.month = 12;\r\n      }\r\n      this.loadOrdersData();\r\n    },\r\n    //后一个月\r\n    nextMonth() {\r\n      if (this.checkAvailability.month < 12) {\r\n        this.checkAvailability.month++;\r\n      } else {\r\n        this.checkAvailability.year++;\r\n        this.checkAvailability.month = 1;\r\n      }\r\n      this.loadOrdersData();\r\n    },\r\n  },\r\n  components: {\r\n    //注册子组件 使用名字:导入名字\r\n    Footer,\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"@/assets/css/SelectDate.css\" scoped></style>\r\n<style scoped></style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}