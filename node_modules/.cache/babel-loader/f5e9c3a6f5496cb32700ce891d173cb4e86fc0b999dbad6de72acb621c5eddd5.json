{"ast":null,"code":"import Footer from \"@/components/Footer.vue\";\nexport default {\n  data() {\n    return {\n      user: {\n        realName: \"\",\n        identityCard: \"\",\n        birthday: \"\",\n        userID: \"\" //就是手机号码\n      },\n      hospital: {\n        hpID: this.hpID,\n        name: \"\",\n        businessHours: \"\",\n        deadline: \"\",\n        telephone: \"\",\n        address: \"\"\n      },\n      smID: this.$route.query.smID,\n      hpID: this.$route.query.hpID,\n      year: this.$route.query.year,\n      month: this.$route.query.month,\n      selectDay: this.$route.query.selectDay,\n      price: \"\"\n    };\n  },\n  created() {\n    this.loadHospitalInfo();\n    this.getSetMealPrice();\n    this.getUserInfo();\n  },\n  methods: {\n    toBack() {\n      this.$router.back();\n    },\n    formatDate(selectDay) {\n      if (!selectDay) return \"\";\n      const [year, month, day] = selectDay.split(\"-\");\n      return `${year}年${parseInt(month)}月${parseInt(day)}日`;\n    },\n    loadHospitalInfo() {\n      let url = \"/hospital/getByHospitalID\";\n      this.$axios({\n        method: \"get\",\n        url: url,\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\"))\n        },\n        params: {\n          hpID: this.hpID\n        }\n      }).then(response => {\n        this.hospital.name = response.data.data.name;\n        this.hospital.businessHours = response.data.data.businessHours;\n        this.hospital.deadline = response.data.data.deadline;\n        this.hospital.telephone = response.data.data.telephone;\n        this.hospital.address = response.data.data.address;\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    getSetMealPrice() {\n      let url = \"/setMeal/getBySetMealID\";\n      this.$axios({\n        method: \"get\",\n        url: url,\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\"))\n        },\n        params: {\n          smID: this.smID\n        }\n      }).then(response => {\n        this.price = response.data.data.price;\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    getUserInfo() {\n      this.user.userID = sessionStorage.getItem(\"userID\");\n      this.user.realName = sessionStorage.getItem(\"realName\");\n      this.user.birthday = sessionStorage.getItem(\"birthday\");\n      this.user.identityCard = sessionStorage.getItem(\"identityCard\");\n      //去除双引号\n      this.user.realName = this.user.realName.replace(/^\\\"|\\\"$/g, \"\");\n      this.user.birthday = this.user.birthday.replace(/^\\\"|\\\"$/g, \"\");\n      this.user.identityCard = this.user.identityCard.replace(/^\\\"|\\\"$/g, \"\");\n    },\n    pay() {\n      let url = \"/user/submitReserve\";\n      this.$axios({\n        method: \"post\",\n        url: url,\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\"))\n        },\n        params: {\n          orderDate: this.selectDay,\n          userID: this.user.userID,\n          hpID: this.hpID,\n          smID: this.smID,\n          state: \"1\"\n        }\n      }).then(respnose => {\n        this.$message({\n          showClose: false,\n          //是否显示关闭按钮\n          message: \"订单已提交！\",\n          duration: 1000,\n          type: \"success\",\n          //类型\n          onClose: true\n        });\n      }).catch(e => {\n        console.log(orderDate);\n        console.log(userID);\n        console.log(hpID);\n        console.log(smID);\n        console.log(e);\n      });\n      // this.$router.push({ path: \"/pay\" }).catch((e) => {\n      //   console.log(e);\n      // });\n    }\n  },\n  components: {\n    //注册子组件   使用名字:导入名字\n    Footer\n  }\n};","map":{"version":3,"names":["Footer","data","user","realName","identityCard","birthday","userID","hospital","hpID","name","businessHours","deadline","telephone","address","smID","$route","query","year","month","selectDay","price","created","loadHospitalInfo","getSetMealPrice","getUserInfo","methods","toBack","$router","back","formatDate","day","split","parseInt","url","$axios","method","headers","Authorization","JSON","parse","sessionStorage","getItem","params","then","response","catch","e","console","log","replace","pay","orderDate","state","respnose","$message","showClose","message","duration","type","onClose","components"],"sources":["src/views/ConfirmOrder.vue"],"sourcesContent":["<template>\r\n  <!-- 总容器 -->\r\n  <div class=\"wrapper\">\r\n    <header>\r\n      <i class=\"fa fa-angle-left\" @click=\"toBack()\"></i>\r\n      <p>确认您的订单</p>\r\n      <div></div>\r\n    </header>\r\n    <div class=\"top-ban\"></div>\r\n\r\n    <section>\r\n      <div class=\"title\">\r\n        <p>体检人信息</p>\r\n      </div>\r\n      <table>\r\n        <tr>\r\n          <td>姓名:</td>\r\n          <td>{{ this.user.realName }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>证件号码:</td>\r\n          <td>{{ this.user.identityCard }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>出生日期:</td>\r\n          <td>{{ this.user.birthday }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>手机号码:</td>\r\n          <td>{{ this.user.userID }}</td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"title\">\r\n        <p>体检日期</p>\r\n      </div>\r\n      <table>\r\n        <tr>\r\n          <td>{{ formatDate(this.selectDay) }}</td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"title\">\r\n        <p>体检机构：</p>\r\n        {{ this.hospital.name }}\r\n      </div>\r\n      <table>\r\n        <tr>\r\n          <td colspan=\"2\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td>营业时间:</td>\r\n          <td>{{ this.hospital.businessHours }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>采血截止:</td>\r\n          <td>{{ this.hospital.deadline }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>机构电话:</td>\r\n          <td>{{ this.hospital.telephone }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>机构地址:</td>\r\n          <td>{{ this.hospital.address }}</td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"title\">\r\n        <p>套餐类型</p>\r\n      </div>\r\n      <table>\r\n        <tr>\r\n          <td v-if=\"smID == 1\">男士套餐</td>\r\n          <td v-else=\"smID == 0\">女士套餐</td>\r\n        </tr>\r\n      </table>\r\n    </section>\r\n\r\n    <div ref=\"alipayForm\"></div>\r\n\r\n    <div class=\"bottom-btn\">\r\n      <div class=\"first\">\r\n        实付款: <span>{{ this.price }}元</span>\r\n      </div>\r\n      <div class=\"last\" @click=\"pay()\">确认支付</div>\r\n    </div>\r\n\r\n    <div class=\"bottom-ban\"></div>\r\n    <Footer></Footer>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Footer from \"@/components/Footer.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: {\r\n        realName: \"\",\r\n        identityCard: \"\",\r\n        birthday: \"\",\r\n        userID: \"\", //就是手机号码\r\n      },\r\n      hospital: {\r\n        hpID: this.hpID,\r\n        name: \"\",\r\n        businessHours: \"\",\r\n        deadline: \"\",\r\n        telephone: \"\",\r\n        address: \"\",\r\n      },\r\n      smID: this.$route.query.smID,\r\n      hpID: this.$route.query.hpID,\r\n      year: this.$route.query.year,\r\n      month: this.$route.query.month,\r\n      selectDay: this.$route.query.selectDay,\r\n      price: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.loadHospitalInfo();\r\n    this.getSetMealPrice();\r\n    this.getUserInfo();\r\n  },\r\n  methods: {\r\n    toBack() {\r\n      this.$router.back();\r\n    },\r\n    formatDate(selectDay) {\r\n      if (!selectDay) return \"\";\r\n      const [year, month, day] = selectDay.split(\"-\");\r\n      return `${year}年${parseInt(month)}月${parseInt(day)}日`;\r\n    },\r\n    loadHospitalInfo() {\r\n      let url = \"/hospital/getByHospitalID\";\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: url,\r\n        headers: {\r\n          Authorization:\r\n            \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\")),\r\n        },\r\n        params: {\r\n          hpID: this.hpID,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          this.hospital.name = response.data.data.name;\r\n          this.hospital.businessHours = response.data.data.businessHours;\r\n          this.hospital.deadline = response.data.data.deadline;\r\n          this.hospital.telephone = response.data.data.telephone;\r\n          this.hospital.address = response.data.data.address;\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    getSetMealPrice() {\r\n      let url = \"/setMeal/getBySetMealID\";\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: url,\r\n        headers: {\r\n          Authorization:\r\n            \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\")),\r\n        },\r\n        params: {\r\n          smID: this.smID,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          this.price = response.data.data.price;\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    getUserInfo() {\r\n      this.user.userID = sessionStorage.getItem(\"userID\");\r\n      this.user.realName = sessionStorage.getItem(\"realName\");\r\n      this.user.birthday = sessionStorage.getItem(\"birthday\");\r\n      this.user.identityCard = sessionStorage.getItem(\"identityCard\");\r\n      //去除双引号\r\n      this.user.realName = this.user.realName.replace(/^\\\"|\\\"$/g, \"\");\r\n      this.user.birthday = this.user.birthday.replace(/^\\\"|\\\"$/g, \"\");\r\n      this.user.identityCard = this.user.identityCard.replace(/^\\\"|\\\"$/g, \"\");\r\n    },\r\n    pay() {\r\n      let url = \"/user/submitReserve\";\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: url,\r\n        headers: {\r\n          Authorization:\r\n            \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\")),\r\n        },\r\n        params: {\r\n          orderDate: this.selectDay,\r\n          userID: this.user.userID,\r\n          hpID: this.hpID,\r\n          smID: this.smID,\r\n          state: \"1\",\r\n        },\r\n      })\r\n        .then((respnose) => {\r\n          this.$message({\r\n            showClose: false, //是否显示关闭按钮\r\n            message: \"订单已提交！\",\r\n            duration: 1000,\r\n            type: \"success\", //类型\r\n            onClose: true,\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.log(orderDate);\r\n          console.log(userID);\r\n          console.log(hpID);\r\n          console.log(smID);\r\n          console.log(e);\r\n        });\r\n      // this.$router.push({ path: \"/pay\" }).catch((e) => {\r\n      //   console.log(e);\r\n      // });\r\n    },\r\n  },\r\n  components: {\r\n    //注册子组件   使用名字:导入名字\r\n    Footer,\r\n  },\r\n};\r\n</script>\r\n<style src=\"@/assets/css/ConfirmOrder.css\" scoped></style>\r\n<style scoped></style>\r\n"],"mappings":"AA0FA,OAAAA,MAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,YAAA;QACAC,QAAA;QACAC,MAAA;MACA;MACAC,QAAA;QACAC,IAAA,OAAAA,IAAA;QACAC,IAAA;QACAC,aAAA;QACAC,QAAA;QACAC,SAAA;QACAC,OAAA;MACA;MACAC,IAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA;MACAN,IAAA,OAAAO,MAAA,CAAAC,KAAA,CAAAR,IAAA;MACAS,IAAA,OAAAF,MAAA,CAAAC,KAAA,CAAAC,IAAA;MACAC,KAAA,OAAAH,MAAA,CAAAC,KAAA,CAAAE,KAAA;MACAC,SAAA,OAAAJ,MAAA,CAAAC,KAAA,CAAAG,SAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,gBAAA;IACA,KAAAC,eAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACAC,OAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,WAAAV,SAAA;MACA,KAAAA,SAAA;MACA,OAAAF,IAAA,EAAAC,KAAA,EAAAY,GAAA,IAAAX,SAAA,CAAAY,KAAA;MACA,UAAAd,IAAA,IAAAe,QAAA,CAAAd,KAAA,KAAAc,QAAA,CAAAF,GAAA;IACA;IACAR,iBAAA;MACA,IAAAW,GAAA;MACA,KAAAC,MAAA;QACAC,MAAA;QACAF,GAAA,EAAAA,GAAA;QACAG,OAAA;UACAC,aAAA,EACA,YAAAC,IAAA,CAAAC,KAAA,CAAAC,cAAA,CAAAC,OAAA;QACA;QACAC,MAAA;UACAlC,IAAA,OAAAA;QACA;MACA,GACAmC,IAAA,CAAAC,QAAA;QACA,KAAArC,QAAA,CAAAE,IAAA,GAAAmC,QAAA,CAAA3C,IAAA,CAAAA,IAAA,CAAAQ,IAAA;QACA,KAAAF,QAAA,CAAAG,aAAA,GAAAkC,QAAA,CAAA3C,IAAA,CAAAA,IAAA,CAAAS,aAAA;QACA,KAAAH,QAAA,CAAAI,QAAA,GAAAiC,QAAA,CAAA3C,IAAA,CAAAA,IAAA,CAAAU,QAAA;QACA,KAAAJ,QAAA,CAAAK,SAAA,GAAAgC,QAAA,CAAA3C,IAAA,CAAAA,IAAA,CAAAW,SAAA;QACA,KAAAL,QAAA,CAAAM,OAAA,GAAA+B,QAAA,CAAA3C,IAAA,CAAAA,IAAA,CAAAY,OAAA;MACA,GACAgC,KAAA,CAAAC,CAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MACA;IACA;IACAvB,gBAAA;MACA,IAAAU,GAAA;MACA,KAAAC,MAAA;QACAC,MAAA;QACAF,GAAA,EAAAA,GAAA;QACAG,OAAA;UACAC,aAAA,EACA,YAAAC,IAAA,CAAAC,KAAA,CAAAC,cAAA,CAAAC,OAAA;QACA;QACAC,MAAA;UACA5B,IAAA,OAAAA;QACA;MACA,GACA6B,IAAA,CAAAC,QAAA;QACA,KAAAxB,KAAA,GAAAwB,QAAA,CAAA3C,IAAA,CAAAA,IAAA,CAAAmB,KAAA;MACA,GACAyB,KAAA,CAAAC,CAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MACA;IACA;IACAtB,YAAA;MACA,KAAAtB,IAAA,CAAAI,MAAA,GAAAkC,cAAA,CAAAC,OAAA;MACA,KAAAvC,IAAA,CAAAC,QAAA,GAAAqC,cAAA,CAAAC,OAAA;MACA,KAAAvC,IAAA,CAAAG,QAAA,GAAAmC,cAAA,CAAAC,OAAA;MACA,KAAAvC,IAAA,CAAAE,YAAA,GAAAoC,cAAA,CAAAC,OAAA;MACA;MACA,KAAAvC,IAAA,CAAAC,QAAA,QAAAD,IAAA,CAAAC,QAAA,CAAA8C,OAAA;MACA,KAAA/C,IAAA,CAAAG,QAAA,QAAAH,IAAA,CAAAG,QAAA,CAAA4C,OAAA;MACA,KAAA/C,IAAA,CAAAE,YAAA,QAAAF,IAAA,CAAAE,YAAA,CAAA6C,OAAA;IACA;IACAC,IAAA;MACA,IAAAjB,GAAA;MACA,KAAAC,MAAA;QACAC,MAAA;QACAF,GAAA,EAAAA,GAAA;QACAG,OAAA;UACAC,aAAA,EACA,YAAAC,IAAA,CAAAC,KAAA,CAAAC,cAAA,CAAAC,OAAA;QACA;QACAC,MAAA;UACAS,SAAA,OAAAhC,SAAA;UACAb,MAAA,OAAAJ,IAAA,CAAAI,MAAA;UACAE,IAAA,OAAAA,IAAA;UACAM,IAAA,OAAAA,IAAA;UACAsC,KAAA;QACA;MACA,GACAT,IAAA,CAAAU,QAAA;QACA,KAAAC,QAAA;UACAC,SAAA;UAAA;UACAC,OAAA;UACAC,QAAA;UACAC,IAAA;UAAA;UACAC,OAAA;QACA;MACA,GACAd,KAAA,CAAAC,CAAA;QACAC,OAAA,CAAAC,GAAA,CAAAG,SAAA;QACAJ,OAAA,CAAAC,GAAA,CAAA1C,MAAA;QACAyC,OAAA,CAAAC,GAAA,CAAAxC,IAAA;QACAuC,OAAA,CAAAC,GAAA,CAAAlC,IAAA;QACAiC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MACA;MACA;MACA;MACA;IACA;EACA;EACAc,UAAA;IACA;IACA5D;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}