{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      user: {\n        userId: \"\",\n        newPassword: \"\"\n      }\n    };\n  },\n  methods: {\n    toBack() {\n      this.$router.back();\n    },\n    //TODO:验证用户提交的数据是否正确\n    submit() {\n      //字段检测部分\n      if (this.user.newPassword == \"\") {\n        this.$message({\n          showClose: true,\n          //是否显示关闭按钮\n          message: \"新密码不能为空\",\n          type: \"warning\",\n          //类型\n          onClose: () => {\n            console.log(\"关闭\");\n          }\n        });\n        return;\n      }\n      let url = \"/user/updateUserPassword\";\n      this.$axios({\n        method: \"post\",\n        url: url,\n        headers: {\n          Authorization: \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\"))\n        },\n        data: {\n          username: this.user.userId,\n          password: this.user.newPassword\n        }\n      }).then(response => {\n        if (response.data.code == 200) {\n          this.$router.push({\n            path: \"/login\"\n          }).catch(e => {});\n          this.$message({\n            showClose: false,\n            //是否显示关闭按钮\n            message: \"修改成功！\",\n            duration: 1000,\n            type: \"success\" //类型\n          });\n        }\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  }\n};","map":{"version":3,"names":["data","user","userId","newPassword","methods","toBack","$router","back","submit","$message","showClose","message","type","onClose","console","log","url","$axios","method","headers","Authorization","JSON","parse","sessionStorage","getItem","username","password","then","response","code","push","path","catch","e","duration"],"sources":["src/views/UpdatePWD.vue"],"sourcesContent":["<template>\r\n  <!-- 总容器 -->\r\n  <div class=\"wrapper\">\r\n    <header>\r\n      <i class=\"fa fa-angle-left fa-2x\" @click=\"toBack\"></i>\r\n      <p>修改密码</p>\r\n      <div></div>\r\n    </header>\r\n    <div class=\"top-ban\"></div>\r\n    <table>\r\n      <tr>\r\n        <td>手机号</td>\r\n        <td>\r\n          <input type=\"text\" v-model=\"user.userId\" placeholder=\"请输入手机号\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>新密码</td>\r\n        <td>\r\n          <input\r\n            type=\"password\"\r\n            v-model=\"user.newPassword\"\r\n            placeholder=\"请输入新密码\"\r\n          />\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <div class=\"btn\" @click=\"submit\">完成</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: {\r\n        userId: \"\",\r\n        newPassword: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    toBack() {\r\n      this.$router.back();\r\n    },\r\n    //TODO:验证用户提交的数据是否正确\r\n    submit() {\r\n      //字段检测部分\r\n      if (this.user.newPassword == \"\") {\r\n        this.$message({\r\n          showClose: true, //是否显示关闭按钮\r\n          message: \"新密码不能为空\",\r\n          type: \"warning\", //类型\r\n          onClose: () => {\r\n            console.log(\"关闭\");\r\n          },\r\n        });\r\n        return;\r\n      }\r\n      let url = \"/user/updateUserPassword\";\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: url,\r\n        headers: {\r\n          Authorization:\r\n            \"Bearer \" + JSON.parse(sessionStorage.getItem(\"token\")),\r\n        },\r\n        data: {\r\n          username: this.user.userId,\r\n          password: this.user.newPassword,\r\n        },\r\n      })\r\n        .then((response) => {\r\n          if (response.data.code == 200) {\r\n            this.$router.push({ path: \"/login\" }).catch((e) => {});\r\n            this.$message({\r\n              showClose: false, //是否显示关闭按钮\r\n              message: \"修改成功！\",\r\n              duration: 1000,\r\n              type: \"success\", //类型\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style src=\"@/assets/css/Register.css\" scoped></style>\r\n<style scoped></style>\r\n"],"mappings":";AAgCA;EACAA,KAAA;IACA;MACAC,IAAA;QACAC,MAAA;QACAC,WAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACA;IACAC,OAAA;MACA;MACA,SAAAP,IAAA,CAAAE,WAAA;QACA,KAAAM,QAAA;UACAC,SAAA;UAAA;UACAC,OAAA;UACAC,IAAA;UAAA;UACAC,OAAA,EAAAA,CAAA;YACAC,OAAA,CAAAC,GAAA;UACA;QACA;QACA;MACA;MACA,IAAAC,GAAA;MACA,KAAAC,MAAA;QACAC,MAAA;QACAF,GAAA,EAAAA,GAAA;QACAG,OAAA;UACAC,aAAA,EACA,YAAAC,IAAA,CAAAC,KAAA,CAAAC,cAAA,CAAAC,OAAA;QACA;QACAxB,IAAA;UACAyB,QAAA,OAAAxB,IAAA,CAAAC,MAAA;UACAwB,QAAA,OAAAzB,IAAA,CAAAE;QACA;MACA,GACAwB,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAA5B,IAAA,CAAA6B,IAAA;UACA,KAAAvB,OAAA,CAAAwB,IAAA;YAAAC,IAAA;UAAA,GAAAC,KAAA,CAAAC,CAAA;UACA,KAAAxB,QAAA;YACAC,SAAA;YAAA;YACAC,OAAA;YACAuB,QAAA;YACAtB,IAAA;UACA;QACA;MACA,GACAoB,KAAA,CAAAC,CAAA;QACAnB,OAAA,CAAAC,GAAA,CAAAkB,CAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}